sudo: true
language: node_js
services:
  - docker
node_js:
  - "8"
cache:
  directories:
    - "node_modules"
script:
  - npm install -g
  - npm run lint
matrix:
  include:
    - language: node_js
      os: linux
      sudo: required
      install:
        - curl -L https://github.com/docker/compose/releases/download/1.20.1/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose > /dev/null
        - chmod +x /usr/local/bin/docker-compose
      before_script:
        - cd $TRAVIS_BUILD_DIR/Dadabase
        - sudo docker-compose up&
        - cd $TRAVIS_BUILD_DIR/RabbitMQ
        - sudo docker-compose up&
        - cd $TRAVIS_BUILD_DIR/User
        - sudo docker-compose up&
        - cd $TRAVIS_BUILD_DIR/Login
        - sudo docker-compose up&
        - cd $TRAVIS_BUILD_DIR
      script:
        - sudo docker run dulce_login npm run test
        - sudo docker run dulce_user npm run test
